{% extends 'base.html' %}

{% block content %}
<h2>Example Page</h2>

<div class="table-container">
  <table class="table">
    <thead>
      <tr>
        <th>Site</th>
        <th>Username</th>
        <th>Password</th>
        <th>Show</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for entry, password in data %}
      <tr>
        <td><strong>{{ entry.site }}</strong></td>
        <td>{{ entry.username }}</td>
        <td>
          <input type="password" class="form-control password-field" value="{{ password }}" readonly>
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-outline-secondary toggle-btn">ğŸ‘</button>
        </td>
        <td>
          <a href="{{ url_for('delete_entry', entry_id=entry.id) }}">ğŸ—‘ï¸ Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleButtons = document.querySelectorAll('.toggle-btn');

    toggleButtons.forEach(function (btn) {
      btn.addEventListener('click', function () {
        const passwordInput = this.closest('tr').querySelector('.password-field');
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          this.textContent = 'ğŸ™ˆ';
        } else {
          passwordInput.type = 'password';
          this.textContent = 'ğŸ‘';
        }
      });
    });
  });
</script>
{% endblock %}